
# ì‡¼í•‘ëª° ê³ ê° ì„¸ë¶„í™” ë¶„ì„

## âœï¸ ê³¼ì œì˜ ê°œìš”

| ì¹´í…Œê³ ë¦¬ | ë‚œì´ë„ | ì œí•œì‹œê°„ |
|----------|--------|----------|
| data_scientist | hard | 7d |

### ðŸ’» ê³¼ì œì—ì„œ ìš”êµ¬í•˜ëŠ” ê°œë°œì–¸ì–´

- python


## ðŸ“œ ê³¼ì œì˜ ë‚´ìš©

> ê³¼ì œ ì„¤ëª…ê³¼ ìš”êµ¬ì‚¬í•­ì„ ì°¸ê³ í•˜ì—¬, êµ¬í˜„í•´ ì£¼ì„¸ìš”.

### ðŸ‘€ ê³¼ì œì˜ ì„¤ëª…

# ê³¼ì œ ê°€ì´ë“œ

## ê°œìš”

**ì‡¼í•‘ëª° ê³ ê° ì„¸ë¶„í™” ë¶„ì„(í´ëŸ¬ìŠ¤í„°ë§)** ë°ì´í„° ì‚¬ì´ì–¸ìŠ¤ ê³¼ì œìž…ë‹ˆë‹¤.

ì˜¨ë¼ì¸ ë¦¬í…Œì¼ ê±°ëž˜ ì´ë ¥ ë°ì´í„°ë¥¼ ì •ë¦¬Â·ê°€ê³µí•˜ì—¬ **ìœ ì‚¬í•œ ê³ ê°êµ°(ì„¸ê·¸ë¨¼íŠ¸)**&#xC73C;ë¡œ ë¬¶ê³ , ê° ì„¸ê·¸ë¨¼íŠ¸ì˜ **ê·œëª¨/ê°€ì¹˜/í–‰ë™ íŠ¹ì„±**ì„ í•´ì„í•˜ëŠ” ê²ƒì´ ëª©í‘œìž…ë‹ˆë‹¤.

### ì°¸ê³  ë§í¬ (URL)

* ë°ì´í„°: `https://www.kaggle.com/datasets/vijayuv/onlineretail`

### ì‚¬ìš©ìž ì‹œë‚˜ë¦¬ì˜¤

1. **ë°ì´í„° ì ìž¬/ì •ë¦¬**: ì›ë³¸ CSVë¥¼ ë¡œë“œí•˜ê³  ê²°ì¸¡ì¹˜/ì´ìƒì¹˜/ì·¨ì†Œ ê±°ëž˜(ìŒìˆ˜ ìˆ˜ëŸ‰ ë˜ëŠ” `InvoiceNo` íŒ¨í„´)ë¥¼ ì •ì œí•œë‹¤.
2. **íŠ¹ì„± ì—”ì§€ë‹ˆì–´ë§**: RFM(Recency/Frequency/Monetary) + ìž¥ë°”êµ¬ë‹ˆ/ë°˜í’ˆ/ë‹¤ì–‘ì„± ì§€í‘œ ë“±ì„ ê³ ê° ë‹¨ìœ„ë¡œ ì§‘ê³„í•œë‹¤.
3. **ìŠ¤ì¼€ì¼ë§/ì°¨ì›ì¶•ì†Œ**: ìˆ˜ì¹˜ íŠ¹ì„±ì„ í‘œì¤€í™”í•˜ê³ (í•„ìš” ì‹œ ë¡œê·¸ ë³€í™˜), ì‹œê°í™”ìš©ìœ¼ë¡œ PCA/UMAPì„ ì ìš©í•œë‹¤.
4. **í´ëŸ¬ìŠ¤í„°ë§**: k ê°’ íƒìƒ‰(ì—˜ë³´/ì‹¤ë£¨ì—£/Calinski-Harabasz ë“±) â†’ í›„ë³´ ì•Œê³ ë¦¬ì¦˜ ë¹„êµ â†’ ìµœì¢… ëª¨ë¸ ì„ íƒ.
5. **ì„¸ê·¸ë¨¼íŠ¸ í•´ì„**: ê° ì„¸ê·¸ë¨¼íŠ¸ì˜ í¬ê¸°/ë§¤ì¶œ ê¸°ì—¬/ì£¼ìš” íŠ¹ì„±ì„ í‘œ/ì°¨íŠ¸ë¡œ ìš”ì•½í•˜ê³  **íŽ˜ë¥´ì†Œë‚˜**ë¥¼ ì •ì˜í•œë‹¤.
6. **ê²°ê³¼ ì‚°ì¶œë¬¼**: ê³ ê°-ì„¸ê·¸ë¨¼íŠ¸ ë§¤í•‘, ì„¸ê·¸ë¨¼íŠ¸ ìš”ì•½ ë¦¬í¬íŠ¸/ì‹œê°í™”, ìž¬í˜„ ê°€ëŠ¥í•œ ì½”ë“œÂ·í™˜ê²½.

### ë°ì´í„° ì„¤ëª…(ì»¬ëŸ¼ ê°€ì´ë“œ)

ì¼ë°˜ì ìœ¼ë¡œ ë‹¤ìŒ ì»¬ëŸ¼ì„ í¬í•¨í•©ë‹ˆë‹¤(ì‹¤ì œ ìŠ¤í‚¤ë§ˆëŠ” ë°ì´í„°ì…‹ íŒŒì¼ì„ ê¸°ì¤€ìœ¼ë¡œ í™•ì¸):

* `InvoiceNo`(ì£¼ë¬¸ë²ˆí˜¸), `StockCode`(ìƒí’ˆì½”ë“œ), `Description`(ìƒí’ˆëª…), `Quantity`(ìˆ˜ëŸ‰; ë°˜í’ˆ/ì·¨ì†ŒëŠ” ìŒìˆ˜ ê°€ëŠ¥),
* `InvoiceDate`(ê±°ëž˜ì‹œê°), `UnitPrice`(ë‹¨ê°€), `CustomerID`(ê³ ê°ID; ê²°ì¸¡ ê°€ëŠ¥), `Country`(êµ­ê°€).

> ê¶Œìž¥ ì „ì²˜ë¦¬: Quantity \<= 0 ì œê±°(ë°˜í’ˆ ë¶„ì„ì„ ë¶„ë¦¬í•˜ì§€ ì•ŠëŠ”ë‹¤ë©´), UnitPrice \<= 0 ì œê±°, CustomerID ê²°ì¸¡ í–‰ ì œì™¸, ì¤‘ë³µ/ì´ìƒì¹˜ ì ê²€.

### í•„ìš”í•œ ì‚°ì¶œë¬¼

* **ë…¸íŠ¸ë¶/ìŠ¤í¬ë¦½íŠ¸**&#x20;

  * `01_eda.ipynb`: ê²°ì¸¡/ì´ìƒì¹˜/ê±°ëž˜ ë¶„í¬, ë§¤ì¶œ ì¶”ì´, ë°˜í’ˆ ë¹„ìœ¨, êµ­ê°€ ë¶„í¬
  * `02_features.ipynb` ë˜ëŠ” `build_features.py`: ê³ ê° ë‹¨ìœ„ ì§‘ê³„(RFM ë“±)
  * `03_cluster.ipynb`: ìŠ¤ì¼€ì¼ë§/ì°¨ì›ì¶•ì†Œ/ëª¨ë¸í•™ìŠµ/k íƒìƒ‰/í‰ê°€
  * `04_profile.ipynb`: ì„¸ê·¸ë¨¼íŠ¸ í•´ì„(í‘œ/ì°¨íŠ¸Â·íŽ˜ë¥´ì†Œë‚˜Â·ì „ëžµ ì¸ì‚¬ì´íŠ¸)
* **ì•„í‹°íŒ©íŠ¸**&#x20;

  * `customer_features.csv`(ê³ ê° íŠ¹ì„± í…Œì´ë¸”), `cluster_assignments.csv`(ê³ ê°â†’ì„¸ê·¸ë¨¼íŠ¸)
  * `scaler.pkl`/`cluster_model.pkl`/`pca.pkl`(ì„ íƒ)
  * `segment_summary.csv`/`segment_profile.md`, `figures/*.png`(ì‹¤ë£¨ì—£, PCA 2D, ë ˆì´ë” ì°¨íŠ¸ ë“±)
* **ìž¬í˜„ì„± ë¬¸ì„œ**&#x20;

  * `README.md`(í™˜ê²½/ì‹¤í–‰ ìˆœì„œ/ìž…Â·ì¶œë ¥ ì„¤ëª…), `requirements.txt` ë˜ëŠ” `environment.yml`

### ë°ì´í„° ì¸í„°íŽ˜ì´ìŠ¤ ë° ì˜ˆì‹œ (Python íƒ€ìž… + ìƒ˜í”Œ)

```python
# types.py
from __future__ import annotations
from dataclasses import dataclass
from typing import Dict, List, Optional

@dataclass
class CustomerFeatures:
    customer_id: int
    recency_days: float        # ë§ˆì§€ë§‰ êµ¬ë§¤ ì´í›„ ì¼ìˆ˜(ìŠ¤ëƒ…ìƒ· ê¸°ì¤€)
    frequency: int             # ì£¼ë¬¸ íšŸìˆ˜(ì²­êµ¬ì„œ ìˆ˜)
    monetary: float            # ì´ ë§¤ì¶œ(Quantity*UnitPrice í•©)
    avg_basket_size: float     # ì£¼ë¬¸ë‹¹ í‰ê·  ì•„ì´í…œ ìˆ˜
    avg_basket_value: float    # ì£¼ë¬¸ë‹¹ í‰ê·  ê¸ˆì•¡
    product_diversity: int     # ê³ ìœ  ìƒí’ˆ ìˆ˜
    return_ratio: float        # (ë°˜í’ˆ ìˆ˜ëŸ‰ ì ˆëŒ€ê°’) / (êµ¬ë§¤ ìˆ˜ëŸ‰) 0~1
    country: Optional[str] = None

@dataclass
class SegmentAssignment:
    customer_id: int
    segment_id: int
    score: Optional[float] = None  # (ì„ íƒ) ì†Œì† ì‹ ë¢°ë„/ê±°ë¦¬

@dataclass
class SegmentSummary:
    segment_id: int
    size: int
    revenue_share: float          # ì „ì²´ ëŒ€ë¹„ ë§¤ì¶œ ê¸°ì—¬ë„
    feature_means: Dict[str, float]  # ê° íŠ¹ì„± í‰ê· 
    title: str                    # ì˜ˆ: "VIP ë¹ˆë²ˆÂ·ê³ ê°€", "ì´íƒˆ ìœ„í—˜", "ì‹ ê·œ"

```

```
# customer_features.csv (ìµœì†Œ ì˜ˆì‹œ)
customer_id,recency_days,frequency,monetary,avg_basket_size,avg_basket_value,product_diversity,return_ratio,country
17850,12,25,15430.50,8.1,617.22,132,0.03,United Kingdom
13047,45,6,  980.20,3.2,163.37, 57,0.00,Germany

```

```
# cluster_assignments.csv (ìµœì†Œ ì˜ˆì‹œ)
customer_id,segment_id,score
17850,0,0.88
13047,2,0.73

```

```
# segment_summary.csv (ìµœì†Œ ì˜ˆì‹œ)
segment_id,size,revenue_share,recency_days,frequency,monetary,avg_basket_size,avg_basket_value,product_diversity,return_ratio
0,412,0.58,17.4,19.2,12100.3,7.6,540.2,108,0.04
1,985,0.31,42.1, 4.8,  950.5,3.1,210.7, 45,0.02
2,223,0.11,88.7, 2.1,  370.2,2.3,176.9, 21,0.01

```

â€‹


### ðŸŽ¯ ê³¼ì œì˜ ìš”êµ¬ì‚¬í•­

- ì •ì œ/ì „ì²˜ë¦¬: ê²°ì¸¡/ì´ìƒì¹˜ ì²˜ë¦¬, ë°˜í’ˆ/ì·¨ì†Œ ë¡œì§ ì •ì˜(Quantity<=0 ì œê±° ë˜ëŠ” ë³„ë„ ì§‘ê³„ ê¸°ì¤€ ëª…ì‹œ)
- íŠ¹ì„± ì—”ì§€ë‹ˆì–´ë§: RFM + ìž¥ë°”êµ¬ë‹ˆ/ë‹¤ì–‘ì„±/ë°˜í’ˆ ì§€í‘œ ì‚°ì¶œ, ìŠ¤ëƒ…ìƒ· ê¸°ì¤€ì¼ ê³ ì •(ìž¬í˜„ì„±)
- ìŠ¤ì¼€ì¼ë§/ë³€í™˜: í‘œì¤€í™”/ë¡œê·¸ ë³€í™˜(í•„ìš” ì‹œ) ë° í”¼ì²˜ ìƒê´€ ê´€ê³„ ì ê²€
- ì°¨ì›ì¶•ì†Œ ì‹œê°í™”: PCA/UMAP 2D í”Œë¡¯ìœ¼ë¡œ êµ°ì§‘ ë¶„í¬ í™•ì¸
- í´ëŸ¬ìŠ¤í„°ë§: k íƒìƒ‰(ì—˜ë³´/ì‹¤ë£¨ì—£ ë“±) í›„ ìµœì¢… ëª¨ë¸ ì„ íƒ ë° ì•ˆì •ì„±(ëžœë¤ ì‹œë“œ, ìž¬í•™ìŠµ ì¼ê´€ì„±)
- í‰ê°€/í•´ì„: ì„¸ê·¸ë¨¼íŠ¸ í¬ê¸°Â·ë§¤ì¶œ ê¸°ì—¬ë„Â·í•µì‹¬ íŠ¹ì„± ìš”ì•½, íŽ˜ë¥´ì†Œë‚˜ 1ì¤„ ì„¤ëª…
- ê²°ê³¼ë¬¼ ì €ìž¥: customer_features.csv, cluster_assignments.csv, segment_summary.csv, ì‹œê°í™” PNG
- ìž¬í˜„ì„±: ì‹œë“œ ê³ ì •, ì‹¤í–‰ ìˆœì„œ/ìž…Â·ì¶œë ¥ ê²½ë¡œë¥¼ READMEì— ëª…ì‹œ
- (ì„ íƒ) ëª¨ë¸ ë¹„êµ: ì„œë¡œ ë‹¤ë¥¸ ì•Œê³ ë¦¬ì¦˜ ë˜ëŠ” k ê°’ ë¹„êµ ë° í†µê³„ì  ìœ ì˜ì„± ê°„ë‹¨ ê²€í† 
- (ì„ íƒ) ë¹„ì¦ˆë‹ˆìŠ¤ ì•¡ì…˜: ê° ì„¸ê·¸ë¨¼íŠ¸ë³„ ìº íŽ˜ì¸ ì•„ì´ë””ì–´ 2~3ê°œ ì œì‹œ
